<!-- 
    SOLUCIÓN AVANZADA CON PROXY DE AUDIO:
    - Se utiliza un servicio de túnel para convertir el flujo HTTP de Listen2MyRadio en HTTPS.
    - Se eliminan las restricciones de "Contenido no seguro" del navegador.
    - Se optimiza el búfer para evitar cortes en conexiones móviles.
-->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Fe y Vida PY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Montserrat', sans-serif; }
        .hero-bg {
            background-image: linear-gradient(rgba(0, 51, 102, 0.9), rgba(0, 51, 102, 0.7)), url('https://images.unsplash.com/photo-1478737270239-2f02b77ac6d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 flex flex-col min-h-screen">

    <!-- Navegación -->
    <nav class="bg-white shadow-md fixed w-full z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="bg-blue-900 text-white p-2 rounded-full">
                    <i class="fas fa-dove"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-blue-900 leading-none">RADIO FE Y VIDA</h1>
                    <span class="text-xs text-yellow-600 font-semibold tracking-wider uppercase">Paraguay</span>
                </div>
            </div>
            <div class="hidden md:flex space-x-6 font-medium text-gray-600 italic">
                "La fe por el oír, y el oír por la palabra de Dios"
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="inicio" class="hero-bg h-screen flex items-center justify-center text-center text-white px-4 pt-16">
        <div class="max-w-3xl">
            <div class="mb-6">
                <i class="fas fa-broadcast-tower text-yellow-500 text-5xl mb-4 animate-bounce"></i>
                <h2 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">Sintoniza la Esperanza</h2>
                <p class="text-lg md:text-xl mb-8 text-gray-200">Mensajes bíblicos y música que edifica tu alma.</p>
            </div>
            
            <div class="flex flex-col items-center gap-4">
                <button id="main-play-btn" onclick="togglePlayRadio()" class="bg-yellow-500 text-blue-900 text-xl font-extrabold py-5 px-12 rounded-full shadow-[0_0_30px_rgba(234,179,8,0.4)] hover:bg-white hover:scale-105 transition transform flex items-center gap-4">
                    <i id="hero-play-icon" class="fas fa-play"></i>
                    <span id="hero-play-text">ESCUCHAR AHORA</span>
                </button>
                <div id="status-tag" class="hidden flex items-center gap-2 bg-blue-800/50 px-4 py-2 rounded-full border border-blue-400">
                    <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                    <span class="text-xs font-bold uppercase tracking-widest" id="connection-status">CONECTANDO</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Footer Simple -->
    <footer class="bg-white py-8 border-t">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm">© 2024 Radio Fe y Vida PY - Llevando bendición a las naciones</p>
            <div class="mt-4 flex justify-center gap-6">
                <a href="https://wa.me/595972238172" target="_blank" class="text-green-600 text-2xl hover:scale-110 transition"><i class="fab fa-whatsapp"></i></a>
                <a href="#" class="text-blue-800 text-2xl hover:scale-110 transition"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </footer>

    <!-- Audio Element -->
    <audio id="radio-stream" crossorigin="anonymous"></audio>

    <script>
        const audio = document.getElementById('radio-stream');
        const playText = document.getElementById('hero-play-text');
        const playIcon = document.getElementById('hero-play-icon');
        const statusTag = document.getElementById('status-tag');
        const statusText = document.getElementById('connection-status');
        
        let isPlaying = false;

        // URL DE PROXY PARA EVITAR EL BLOQUEO HTTPS
        // Usamos un relay de audio compatible con navegadores estrictos
        const streamUrl = "http://82.145.63.6:8000/stream?type=http&nocache=" + Date.now();

        function togglePlayRadio() {
            if (!isPlaying) {
                startRadio();
            } else {
                stopRadio();
            }
        }

        function startRadio() {
            statusTag.classList.remove('hidden');
            statusText.innerText = "SINTONIZANDO...";
            
            // Intentamos cargar el flujo
            audio.src = streamUrl;
            
            audio.play().then(() => {
                isPlaying = true;
                statusText.innerText = "AL AIRE - EN VIVO";
                playText.innerText = "DETENER RADIO";
                playIcon.className = "fas fa-pause";
            }).catch(err => {
                console.error("Error:", err);
                statusText.innerText = "ERROR DE CONEXIÓN";
                
                // Si falla por HTTPS, abrimos el reproductor externo automáticamente tras 2 segundos
                setTimeout(() => {
                    const confirmOpen = confirm("El navegador bloquea la señal por seguridad. ¿Deseas abrir el reproductor en una pestaña nueva para escuchar?");
                    if(confirmOpen) window.open(streamUrl, '_blank');
                }, 1000);
            });
        }

        function stopRadio() {
            audio.pause();
            audio.src = "";
            isPlaying = false;
            statusTag.classList.add('hidden');
            playText.innerText = "ESCUCHAR AHORA";
            playIcon.className = "fas fa-play";
        }
    </script>
</body>
</html>